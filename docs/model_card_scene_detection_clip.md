---
tags: HisVis
title: HisVis Model Card - Scene Detection CLIP
author: Melvin Wevers
---

# HisVis Model Card - Scene Detection CLIP 

Based on [Mitchell et al. 2019](https://arxiv.org/abs/1810.03993), also see this [post](https://cloud.google.com/blog/products/ai-machine-learning/create-a-model-card-with-scikit-learn)

## Model Details 

### Person or organization developing model
The model has been created by Melvin Wevers (University of Amsterdam) in collaboration with the Noord-Hollands Archief. 

### Model Date
2022-09-14

### Model version 
1.0

### Filename
`scenes/20220914_clip_scene_detection_model.sav`

### Model Type Information 
The model is based on the pre-trained CLIP model by Open AI. We create image embeddings using the model and we then train a logistic regression classifier using these embeddings. 

### Parameters:
max number of iterations: 10,000
C-statistic: 0.65 
12 concurrent workers
Validation size .2
Augmentation includes rotating, warping, zooming, color correction, lighting
Trained on SurfSara Computing Cluster Lisa
Citation details: 
License: CC-NY
Contact details: Melvin Wevers (melvin.wevers@uva.nl)


## Intended Use 
The primary intended user will be the Noord-Hollands Archief, which will use the model to enrich their collections. Other users include other heritage institutes. Other users include CV experts and practitioners that would like to apply or improve the models for their collections. 

## Factors
We evaluated using accuracy and the F‚ÇÅ score per-label. This is quite high, and in cases where the model is incorrect this should not be a big issue. In these cases, it often even difficult for a human observer to discern whether a picture is taken in an indoor or outdoor setting
Metrics. 

**Accuracy: 0.64**
**Top-5 Accuracy: 0.91**


|Label (Dutch) |Precision|Recall|f1-score|Support|
|-----|---------|-----|-----|-------|
akker|0.5254237288135594|0.5636363636363636|0.543859649122807|55.0
amfitheater|0.6666666666666666|0.5882352941176471|0.625|17.0
aula|0.43478260869565216|0.3225806451612903|0.37037037037037035|31.0
auto|0.6025641025641025|0.5875|0.5949367088607596|80.0
auto_ongeluk|0.5409836065573771|0.55|0.5454545454545455|60.0
bakkerij|0.75|0.21428571428571427|0.3333333333333333|28.0
basketbal_korfbal|0.7692307692307693|0.7142857142857143|0.7407407407407408|56.0
begraafplaats|0.8333333333333334|0.3333333333333333|0.47619047619047616|15.0
begrafenis|0.5384615384615384|0.3684210526315789|0.4375|19.0
bibliotheek_boekwinkel|0.5|0.43243243243243246|0.463768115942029|37.0
biljart|0.8|0.8|0.8000000000000002|5.0
binnen_zwembad|0.5333333333333333|0.6666666666666666|0.5925925925925926|24.0
bloemen|0.2903225806451613|0.375|0.3272727272727273|24.0
bloementuin|0.6428571428571429|0.5294117647058824|0.5806451612903226|34.0
boksen|0.0|0.0|0.0|2.0
borden_gevelsteen|0.5462184873949579|0.5327868852459017|0.5394190871369295|122.0
bordspel|0.0|0.0|0.0|2.0
bos_park|0.40625|0.5131578947368421|0.4534883720930233|76.0
boten|0.6382978723404256|0.5882352941176471|0.6122448979591838|153.0
bouwplaats|0.5861344537815126|0.6957605985037406|0.6362599771949828|401.0
brand|0.6796116504854369|0.6363636363636364|0.6572769953051644|110.0
brug|0.4339622641509434|0.5476190476190477|0.48421052631578954|42.0
bruiloft|0.5588235294117647|0.3877551020408163|0.4578313253012048|49.0
buiten_zwembad|0.7083333333333334|0.6538461538461539|0.68|26.0
bus_truck|0.6016949152542372|0.6396396396396397|0.6200873362445415|111.0
cafe|0.5833333333333334|0.5384615384615384|0.5599999999999999|78.0
carnaval|0.42857142857142855|0.10714285714285714|0.17142857142857143|28.0
casino|1.0|0.5|0.6666666666666666|2.0
catwalk|0.875|0.35|0.4999999999999999|20.0
circus|0.7586206896551724|0.5365853658536586|0.6285714285714286|41.0
cricket|0.9152542372881356|0.9642857142857143|0.9391304347826087|56.0
dansende_mensen|0.4166666666666667|0.2777777777777778|0.33333333333333337|90.0
demonstratie|0.5512820512820513|0.45263157894736844|0.49710982658959535|95.0
dieren_overig|0.5|0.25|0.3333333333333333|52.0
duinen|0.5357142857142857|0.6|0.5660377358490566|25.0
eend|0.4|0.16666666666666666|0.23529411764705882|12.0
etalage|0.5625|0.6206896551724138|0.5901639344262296|58.0
etende_mensen|0.6027397260273972|0.5866666666666667|0.5945945945945945|75.0
fabriek|0.47023809523809523|0.512987012987013|0.49068322981366463|154.0
fietsende_mensen|0.5423728813559322|0.4507042253521127|0.49230769230769234|71.0
garage_showroom|0.625|0.37037037037037035|0.4651162790697674|27.0
gebouw|0.6137931034482759|0.7063492063492064|0.6568265682656826|378.0
geestelijken|0.3939393939393939|0.20634920634920634|0.2708333333333333|63.0
golf|0.375|0.15789473684210525|0.22222222222222218|19.0
groepsportret|0.5298507462686567|0.5634920634920635|0.5461538461538462|504.0
gymnastiek|0.5454545454545454|0.6122448979591837|0.5769230769230769|49.0
handbal|0.5952380952380952|0.5813953488372093|0.5882352941176471|43.0
hardlopen|0.5555555555555556|0.3333333333333333|0.4166666666666667|30.0
haven|0.3291139240506329|0.4482758620689655|0.3795620437956205|58.0
helikopter|1.0|0.4|0.5714285714285715|5.0
herdenking|0.43478260869565216|0.37037037037037035|0.39999999999999997|27.0
historisch_toneelstuk|0.25925925925925924|0.19444444444444445|0.2222222222222222|36.0
hockey|0.6153846153846154|0.5|0.5517241379310345|32.0
hond|0.5285714285714286|0.74|0.6166666666666666|50.0
honkbal|0.7876712328767124|0.756578947368421|0.7718120805369126|152.0
huisje|0.34285714285714286|0.3870967741935484|0.3636363636363636|31.0
kaartspel|0.0|0.0|0.0|6.0
kade|0.3333333333333333|0.13793103448275862|0.1951219512195122|29.0
kamperen|0.6666666666666666|0.5217391304347826|0.5853658536585366|23.0
kantoor|0.472|0.5462962962962963|0.5064377682403434|108.0
kapper|0.5|0.2|0.28571428571428575|10.0
kat|0.0|0.0|0.0|13.0
kerk_binnen|0.7303370786516854|0.5855855855855856|0.65|111.0
kerk_buiten|0.6164383561643836|0.5625|0.5882352941176471|80.0
kermis|0.38235294117647056|0.38235294117647056|0.3823529411764706|34.0
kerstmis|0.5555555555555556|0.16129032258064516|0.25|31.0
keuken|0.6136363636363636|0.6136363636363636|0.6136363636363636|44.0
klaslokaal|0.4567901234567901|0.4457831325301205|0.4512195121951219|83.0
koe|0.2727272727272727|0.1875|0.2222222222222222|16.0
konijn|0.0|0.0|0.0|6.0
kunstwerk|0.5538461538461539|0.627906976744186|0.5885558583106267|172.0
luchtfoto|0.8428571428571429|0.8939393939393939|0.8676470588235294|66.0
maquette|0.7411764705882353|0.8076923076923077|0.7730061349693251|78.0
markt|0.5032258064516129|0.6290322580645161|0.5591397849462365|124.0
mensen_op_een_boot|0.38095238095238093|0.4|0.3902439024390244|60.0
mensen_op_trap|0.5|0.2727272727272727|0.3529411764705882|11.0
mensenmassa|0.3961352657004831|0.4685714285714286|0.4293193717277487|175.0
militair|0.625|0.18518518518518517|0.2857142857142857|27.0
motorfiets|0.2727272727272727|0.17647058823529413|0.21428571428571427|17.0
muziek_optreden|0.4406779661016949|0.5360824742268041|0.48372093023255813|291.0
ongeluk_brancard|0.0|0.0|0.0|8.0
ontvangst_afscheid|0.29411764705882354|0.16853932584269662|0.21428571428571427|89.0
opgraving|0.5|0.2727272727272727|0.3529411764705882|11.0
optocht|0.48333333333333334|0.37662337662337664|0.4233576642335766|77.0
paard|0.6774193548387096|0.6885245901639344|0.6829268292682927|61.0
plattegrond|0.8888888888888888|0.5333333333333333|0.6666666666666667|15.0
portret|0.7015873015873015|0.7652354570637119|0.732030473666777|1444.0
race|0.7619047619047619|0.5925925925925926|0.6666666666666666|27.0
roeien|0.6190476190476191|0.8125|0.7027027027027026|16.0
rugby|1.0|0.16666666666666666|0.2857142857142857|6.0
schaatsen|0.71875|0.5897435897435898|0.6478873239436619|39.0
schaken_dammen|0.8793103448275862|0.7183098591549296|0.7906976744186047|71.0
scheepswerf|0.6521739130434783|0.45454545454545453|0.5357142857142857|33.0
sinterklaas|0.7090909090909091|0.5571428571428572|0.6239999999999999|140.0
slagerij|0.8571428571428571|0.375|0.5217391304347825|16.0
sneeuwlandschap|0.6296296296296297|0.425|0.5074626865671642|40.0
speech|0.4473684210526316|0.2956521739130435|0.35602094240837695|115.0
speeltuin|0.53125|0.4473684210526316|0.4857142857142857|38.0
spoorweg|0.0|0.0|0.0|5.0
sport_overig|0.18181818181818182|0.05714285714285714|0.08695652173913043|70.0
standbeeld|0.4642857142857143|0.40625|0.4333333333333333|64.0
stemlokaal|0.0|0.0|0.0|6.0
straat|0.46864686468646866|0.5440613026819924|0.5035460992907801|261.0
strand|0.6883116883116883|0.6385542168674698|0.6625000000000001|83.0
tafel_tennis|0.7058823529411765|0.75|0.7272727272727272|16.0
tennis|0.6857142857142857|0.5333333333333333|0.6|45.0
tentoonstelling|0.4375|0.4375|0.4375|112.0
terras|0.5483870967741935|0.5862068965517241|0.5666666666666665|29.0
theater|0.3431372549019608|0.3684210526315789|0.3553299492385787|95.0
toren|0.5|0.5|0.5|22.0
tram|0.5714285714285714|0.26666666666666666|0.36363636363636365|15.0
trein|0.42857142857142855|0.42857142857142855|0.42857142857142855|28.0
trein_ongeluk|0.75|0.6923076923076923|0.7199999999999999|13.0
trein_station|0.47368421052631576|0.47368421052631576|0.47368421052631576|19.0
uitreiking_huldiging|0.5212121212121212|0.6466165413533834|0.5771812080536912|399.0
vechtsport|0.4|0.4|0.4000000000000001|10.0
vergaderruimte|0.5769230769230769|0.5960264900662252|0.5863192182410423|151.0
vijver_plas|0.35714285714285715|0.45454545454545453|0.4|22.0
visserij|0.5918367346938775|0.42028985507246375|0.4915254237288135|69.0
vlag_hijsen|0.4|0.16666666666666666|0.23529411764705882|12.0
vliegtuig|0.5483870967741935|0.4358974358974359|0.4857142857142857|39.0
voetbal|0.845|0.8802083333333334|0.8622448979591837|384.0
voetbal_team|0.6862745098039216|0.875|0.7692307692307692|40.0
vogels|0.5294117647058824|0.3|0.3829787234042553|30.0
volleybal|0.8214285714285714|0.6764705882352942|0.7419354838709677|34.0
vuilnisbelt|0.0|0.0|0.0|5.0
waterpolo|0.9333333333333333|0.875|0.9032258064516129|16.0
waterweg|0.5|0.3508771929824561|0.41237113402061853|57.0
wielrennen|0.631578947368421|0.5581395348837209|0.5925925925925927|43.0
windmolen|0.6842105263157895|0.65|0.6666666666666667|20.0
windsurfen|0.0|0.0|0.0|4.0
winkel_binnen|0.43902439024390244|0.6338028169014085|0.5187319884726226|142.0
winkelstraat|0.39344262295081966|0.42105263157894735|0.4067796610169491|57.0
woonkamer|0.4852941176470588|0.4520547945205479|0.46808510638297873|73.0
woonwijk|0.37349397590361444|0.36904761904761907|0.37125748502994016|84.0
zaalvoetbal|0.4166666666666667|1.0|0.5882352941176471|10.0
zeepkistenrace|0.6|0.5|0.5454545454545454|12.0
ziekenhuis|0.5454545454545454|0.48|0.5106382978723404|25.0
zwaan|0.6|0.5|0.5454545454545454|6.0
accuracy|0.579018028385117|0.579018028385117|0.579018028385117|0.579018028385117
macro avg|0.5294675223353409|0.45604223834319263|0.4747013718105757|10428.0
weighted avg|0.5765323125084039|0.579018028385117|0.5706504349815565|10428.0



## Evaluation Data 
We created a validation set of .2 

## Training Data
52,160 randomly selected images from the collection Fotopersbureau De Boer (1945-2004), Noord-Hollands Archief. The Datasheet contains information on the number of images per class. 

## Ethical Considerations 
The dataset contains images of funerals and accidents that might cause distress. Moreover, the images of churches and funerals, which are expressions of religious beliefs. Finally, the collection contains images of protests, which are representations of specific political opinions and possibly union membership. Locations can also be identified. However, it should be noted these images are of a historical nature. 

The digitization and preparation of the photographic material was done by a heritage institute, a private company, and a research institute. These were compensated for this using three grants. The annotating was done by crowdworkers, who volunteered but were compensated with physical rewards, such as prints of images in the collection. 

## Caveats and Recommendations
The training data is unevenly balanced. Moreover, for further purposes a multi-label classification might yield better results as the scenes can often not be described by a single label. The fine-tuned CLIP model performs a bit better than the places model (acc:0.64 vs 0.58, and top5-accuracy: 0.91 vs 0.86). However, it is not entirely clear on what data the CLIP model was trained making it less transparent. Given that the CLIP model relies on a logistic regression rather than new layers with dropout as is the case with the places model it might not generalize as well. The validation data, using unseen data, does show high accuracy, however, for some labels there is relatively few material. 
